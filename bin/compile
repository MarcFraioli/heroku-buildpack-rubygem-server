#!/usr/bin/env bash
# bin/compile <build-dir> <cache-dir>

# Work in the build directory
cd $1

cat > "start.sh" <<EOF
# Make a directory to store the gems
mkdir -p gems_home

# Install all the gems in this folder
find . \
    -type f \
    -name '*.gem' \
    -mindepth 1 \
    -maxdepth 1 \
    -exec gem install '{}' \
    --local --no-ri --no-rdoc --ignore-dependencies \
    --force ';'

#!/bin/bash
env
pwd
ls -lR gems_home
gem server -p \$PORT --no-daemon
EOF

chmod 755 start.sh
